#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Adicionar o diret√≥rio do Node.js ao PATH
export PATH="/c/Program Files/nodejs:$PATH"

echo "üé® Formatando arquivos com Prettier..."
npx prettier --write "src/**/*.{ts,tsx}"

echo "‚è≥ Iniciando o build. Por favor, aguarde..."
node -e "
  const { execSync } = require('child_process');
  const Spinner = require('./node_modules/cli-spinner').Spinner;
  const spinner = new Spinner('‚è≥ Realizando o build... %s');
  spinner.setSpinnerString('|/-\\\\');
  spinner.start();

  try {
    execSync('npm run build', { stdio: 'inherit' });
    spinner.stop(true);
    console.log('‚úÖ Build conclu√≠do com sucesso!');
  } catch (error) {
    spinner.stop(true);
    console.error('‚ùå O build falhou. Corrija os erros antes de commitar.');
    process.exit(1);
  }
"
